
[{"content":"","date":"2025 年 2 月 23 日","externalUrl":null,"permalink":"/posts/","section":"Posts","summary":"","title":"Posts","type":"posts"},{"content":"","date":"2025 年 2 月 23 日","externalUrl":null,"permalink":"/","section":"ShionのBlog","summary":"","title":"ShionのBlog","type":"page"},{"content":"\r前言 #\r在 XDA 上查找 Xperia 的第三方 ROM 时，经常会看到类似的警告：\n注意: 请确保你能够发送和接收短信，并能够正常拨打和接听电话（包括通过 WiFi 和 LTE，如果可用）。否则，即使在 LineageOS 上也无法正常工作！此外，某些设备需要在官方系统上使用过一次 VoLTE/VoWiFi 以配置 IMS。\nROM 的开发者通常会提醒用户，在官方系统中确保 VoLTE 功能正常后再刷入第三方 ROM，否则 VoLTE 功能可能无法正常使用。\n实际上，这并不是 ROM 自身的 IMS 实现存在问题，更可能是索尼 Xperia 设备的问题。在一些 Xperia 设备上，VoLTE 配置是“即插即用”的：当用户插入 SIM 卡时，系统才会下发 VoLTE 配置文件。而在某些设备上，拔出 SIM 卡会删除这些配置文件（例如，Xperia 1\u0026amp;5）。细心的用户可能注意到，在官方系统上更换 SIM 卡时，系统可能会提示“正在进行运营商网络优化，请重启”，这通常是因为当前 VoLTE 配置文件与插入的 SIM 卡不匹配，系统需要重新获取配置文件。\n第三方 ROM 似乎不具备这种自动下发的能力。虽然 Xperia 的官方系统如何下发这些配置文件仍不明确，但我们可以通过 QPST 中的 PDC 工具手动下发，从而在第三方 ROM 上也能正常使用 VoLTE/VoWiFi。\n步骤一：下载必要工具 #\rQPST 工具: 下载链接 Android Platform Tools: 下载链接 驱动包（主要是 90E5 驱动和 adb 驱动）: 下载链接 提取码：M4AA 步骤二：通过 root 或 adb root 开启必要端口 #\r开启 USB 调试：请确保你的设备已开启 USB 调试。\nRoot 用户: 在电脑终端或 PowerShell 中输入以下命令：\nadb shell su setprop sys.usb.config diag,diag_mdm,qdss,qdss_mdm,serial_cdev,dpl,rmnet,adb 非 Root，但使用了 Userdebug 第三方 ROM 的用户：在开发者选项中启用“以 Root 身份调试”，然后执行以下命令：\nadb root adb shell setprop sys.usb.config diag,diag_mdm,qdss,qdss_mdm,serial_cdev,dpl,rmnet,adb 此时 adb shell 会自动退出，这是正常现象，请继续按照教程操作。\n步骤三：安装必要驱动 #\r参考 这篇教程中的驱动安装部分，为所有标有问号的设备安装合适的驱动程序。\n步骤四：提取所需的 mbn 配置文件 #\r在大多数 Xperia 设备上，mbn 配置文件通常位于以下路径：\n/vendor/firmware_mnt/image/modem_pr/mcfg/configs/mcfg_sw/generic/ 使用文件管理器（例如 MT 文件管理器）将该文件夹复制出来。\n该目录下按地区代码组织文件夹（例如 EU 代表欧洲，SEA 代表东南亚），而地区代码目录下按运营商组织文件夹（例如 CMCC 代表中国移动）。\n以中国移动 (China Mobile) 为例，其配置文件路径如下：\n/vendor/firmware_mnt/image/modem_pr/mcfg/configs/mcfg_sw/generic/China/CMCC/Commercial/Volte_OpenMkt/mcfg_sw.bin CT 表示中国电信（China Telecom）。 CU 表示中国联通（China Unicom）。 接下来，使用 PDC 工具导入所需的配置文件。如果你的设备可以在 SIM 卡插拔时正常切换配置文件，只需导入所需运营商的配置文件。例如，需要在设备上使用中国移动、NTT docomo、SK Telecom 的 SIM 卡，则只需导入这些运营商的配置文件，设备会自动切换配置文件，无需 PDC 手动干预。\n若设备无法自动切换配置文件，则建议使用以下通用配置文件：\n/vendor/firmware_mnt/image/modem_pr/mcfg/configs/mcfg_sw/generic/GLOBAL/Default_Global/VL/Global/mcfg_sw.mbn 步骤五：写入、激活并切换配置文件 #\r参考 教程链接 。 在 PDC 工具中选择 “Load”，加载提取的 mcfg_sw.bin 文件。 加载完成后，PDC 工具会显示一个新的配置文件选项。 激活此配置文件：选中加载得到的配置文件，点击 \u0026ldquo;Active\u0026rdquo; 单卡设备：激活到 sub0。 双卡设备：激活到 sub0 和 sub1。 重启设备 完成后，你的设备应该可以在第三方 ROM 上正常使用 VoLTE 和 VoWiFi 功能。\n","date":"2025 年 2 月 23 日","externalUrl":null,"permalink":"/posts/%E6%95%99%E7%A8%8B%E5%9C%A8%E4%BB%BB%E6%84%8F%E7%AC%AC%E4%B8%89%E6%96%B9-rom-%E4%B8%8A%E4%B8%BA-xperia-%E8%AE%BE%E5%A4%87%E5%90%AF%E7%94%A8-volte/","section":"Posts","summary":"","title":"教程：在任意第三方 ROM 上为 Xperia 设备启用 VoLTE","type":"posts"},{"content":"","externalUrl":null,"permalink":"/authors/","section":"Authors","summary":"","title":"Authors","type":"authors"},{"content":"","externalUrl":null,"permalink":"/categories/","section":"Categories","summary":"","title":"Categories","type":"categories"},{"content":"","externalUrl":null,"permalink":"/series/","section":"Series","summary":"","title":"Series","type":"series"},{"content":"","externalUrl":null,"permalink":"/tags/","section":"Tags","summary":"","title":"Tags","type":"tags"}]